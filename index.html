<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Okinawa 2025 | æ—…ç¨‹åŠ©æ‰‹</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vuedraggable@4.1.0/dist/vuedraggable.umd.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Noto+Sans+TC:wght@300;400;700;900&display=swap');
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #F4EBE2; color: #4A4A4A; }
        .content-up { margin-top: -60px; border-radius: 40px 40px 0 0; background-color: #F4EBE2; position: relative; z-index: 20; min-height: 100vh; padding-bottom: 120px; }
        .glass-nav { background: rgba(0, 0, 0, 0.4); backdrop-filter: blur(15px); border-radius: 25px; border: 1px solid rgba(255, 255, 255, 0.2); }
        .edit-input { background: transparent; border: none; font-weight: 900; width: 100%; outline: none; }
        .edit-input:focus { border-bottom: 2px solid #0D9488; }
        [v-cloak] { display: none; }
    </style>
</head>
<body class="max-w-md mx-auto shadow-2xl overflow-x-hidden">

<div id="app" v-cloak>
    <header class="relative w-full h-[250px] overflow-hidden">
        <img :src="bannerUrl" class="w-full h-full object-cover" alt="Banner">
        <div class="absolute bottom-20 right-4 flex gap-1 glass-nav p-1.5 z-30">
            <button @click="currentTab = 'schedule'" :class="tabClass('schedule')"><i data-lucide="map-pin" class="w-5 h-5"></i></button>
            <button @click="currentTab = 'info'" :class="tabClass('info')"><i data-lucide="info" class="w-5 h-5"></i></button>
            <button @click="currentTab = 'shopping'" :class="tabClass('shopping')"><i data-lucide="shopping-basket" class="w-5 h-5"></i></button>
            <button @click="currentTab = 'expense'" :class="tabClass('expense')"><i data-lucide="circle-dollar-sign" class="w-5 h-5"></i></button>
        </div>
    </header>

    <div class="content-up p-5">
        
        <div v-if="currentTab === 'schedule'">
            <div @click="openWeatherApp" class="flex items-center justify-between bg-white/80 p-5 rounded-[30px] mb-6 shadow-sm border border-white cursor-pointer active:scale-95 transition-transform">
                <div class="flex items-center gap-4">
                    <i data-lucide="cloud-sun" class="text-teal-500 w-12 h-12"></i>
                    <div>
                        <div class="text-3xl font-black text-teal-800">19Â°C</div>
                        <div class="text-[10px] text-gray-400 font-bold uppercase">Naha, Okinawa Â· æ™´æ™‚å¤šé›²</div>
                    </div>
                </div>
                <div class="text-right">
                    <div class="text-[10px] font-black text-teal-600 mb-1">é«”æ„Ÿ 17Â°C</div>
                    <i data-lucide="external-link" class="w-4 h-4 text-gray-300 ml-auto"></i>
                </div>
            </div>

            <div class="flex overflow-x-auto gap-3 pb-6 no-scrollbar">
                <div v-for="date in dates" :key="date.full" @click="selectedDate = date.full" :class="['flex-shrink-0 w-16 h-20 rounded-2xl flex flex-col items-center justify-center transition-all bg-white shadow-sm border border-gray-100', selectedDate === date.full ? 'bg-teal-600 text-white shadow-teal-200' : '']">
                    <span class="text-[10px] font-black opacity-60">{{ date.weekday }}</span>
                    <span class="text-2xl font-black">{{ date.day }}</span>
                </div>
            </div>

            <draggable v-model="currentDayItems" item-key="id" handle=".drag-handle">
                <template #item="{element, index}">
                    <div>
                        <div v-if="index > 0" class="flex items-center gap-4 py-3 ml-12">
                            <i :data-lucide="element.transType === 'walk' ? 'walking' : 'car'" class="w-4 h-4 text-teal-300"></i>
                            <div class="h-[1px] flex-1 bg-dashed bg-teal-100 border-t border-dashed border-teal-200"></div>
                        </div>

                        <div v-if="element.type === 'èˆªç­'" class="bg-teal-700 text-white rounded-[30px] p-6 shadow-lg mb-4">
                            <div class="flex justify-between items-center mb-4 opacity-70 text-[10px] font-bold tracking-widest uppercase">Flight Info / {{ element.title }}</div>
                            <div class="flex justify-between items-center">
                                <div class="text-center"><div class="text-3xl font-black">{{ element.from }}</div><div class="text-xs opacity-60">{{ element.time.split('-')[0] }}</div></div>
                                <i data-lucide="plane" class="w-6 h-6 opacity-30"></i>
                                <div class="text-center"><div class="text-3xl font-black">{{ element.to }}</div><div class="text-xs opacity-60">{{ element.time.split('-')[1] }}</div></div>
                            </div>
                        </div>

                        <div v-else class="bg-white rounded-[30px] p-5 shadow-sm mb-2 relative flex gap-4 border border-white">
                            <div class="drag-handle opacity-20 flex items-center"><i data-lucide="grip-vertical" class="w-5 h-5"></i></div>
                            <div class="flex-1">
                                <div class="flex justify-between"><span class="text-[10px] font-black text-teal-600 bg-teal-50 px-2 py-0.5 rounded-lg uppercase tracking-tighter">{{ element.type }}</span><span class="text-[10px] font-bold text-gray-300">{{ element.time }}</span></div>
                                <h3 class="font-black text-gray-800 text-lg mt-1">{{ element.title }}</h3>
                                <div class="flex gap-2 mt-4">
                                    <button @click="go(element.location)" class="flex-1 bg-teal-600 text-white py-2.5 rounded-2xl text-xs font-bold flex items-center justify-center gap-2"><i data-lucide="navigation" class="w-4 h-4"></i> å°èˆª</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </template>
            </draggable>
        </div>

        <div v-if="currentTab === 'info'" class="space-y-6">
            <div class="bg-white p-6 rounded-[35px] shadow-sm border border-white">
                <h3 class="font-black text-gray-800 mb-4 flex items-center gap-2 text-sm"><i data-lucide="refresh-cw" class="text-teal-500 w-4 h-4"></i> ç•¶æ—¥åŒ¯ç‡æ›ç®— (1 JPY = 0.21 TWD)</h3>
                <div class="space-y-4">
                    <div class="relative">
                        <input v-model="exchange.jpy" type="number" class="w-full bg-gray-50 p-5 rounded-2xl text-2xl font-black outline-teal-500" placeholder="0">
                        <span class="absolute right-5 top-1/2 -translate-y-1/2 font-black text-gray-300">JPY</span>
                    </div>
                    <div class="flex justify-center"><i data-lucide="chevrons-down" class="text-teal-200"></i></div>
                    <div class="bg-teal-50 p-5 rounded-2xl flex justify-between items-center border border-teal-100">
                        <span class="font-bold text-teal-600">ç´„åˆå°å¹£</span>
                        <span class="text-2xl font-black text-teal-700">NT$ {{ (exchange.jpy * 0.21).toLocaleString(undefined, {maximumFractionDigits: 0}) }}</span>
                    </div>
                </div>
            </div>
            <div class="bg-white p-6 rounded-[35px] shadow-sm">
                <h3 class="font-black text-sm mb-4">ğŸš— ç§Ÿè»Šèˆ‡ç·Šæ€¥è³‡è¨Š</h3>
                <div class="grid grid-cols-2 gap-3">
                    <button @click="go('COT RENTACAR')" class="bg-gray-50 p-4 rounded-2xl text-left"><div class="text-[10px] font-bold text-gray-400">ç§Ÿè»Šè™•</div><div class="font-black text-sm">COTç§Ÿè»Š</div></button>
                    <button class="bg-red-50 p-4 rounded-2xl text-left"><div class="text-[10px] font-bold text-red-
