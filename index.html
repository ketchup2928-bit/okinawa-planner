<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Okinawa 2025 | Ê≤ñÁπ©Ë∑®Âπ¥‰πãÊóÖ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vuedraggable@4.1.0/dist/vuedraggable.umd.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Noto+Sans+TC:wght@300;400;700;900&display=swap');
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #F4EBE2; color: #4A4A4A; overflow-x: hidden; }
        .content-up { margin-top: -60px; border-radius: 40px 40px 0 0; background-color: #F4EBE2; position: relative; z-index: 20; min-height: 100vh; padding-bottom: 100px; }
        .date-item.active { background-color: #0D9488; color: white; transform: scale(1.05); box-shadow: 0 10px 15px -3px rgba(13, 148, 136, 0.3); }
        .glass-nav { background: rgba(0, 0, 0, 0.3); backdrop-filter: blur(12px); border-radius: 25px; border: 1px solid rgba(255, 255, 255, 0.2); }
        .flight-card { background: linear-gradient(135deg, #0d9488 0%, #0f766e 100%); color: white; border-radius: 2rem; padding: 1.5rem; }
        [v-cloak] { display: none; }
    </style>
</head>
<body class="max-w-md mx-auto shadow-2xl">

<div id="app" v-cloak>
    <header class="relative w-full h-[250px] overflow-hidden">
        <img :src="bannerUrl" class="w-full h-full object-cover" alt="Banner">
        <div class="absolute bottom-20 right-4 flex gap-1 glass-nav p-1.5 z-30">
            <button @click="currentTab = 'schedule'" :class="tabClass('schedule')"><i data-lucide="map-pin" class="w-5 h-5"></i></button>
            <button @click="currentTab = 'info'" :class="tabClass('info')"><i data-lucide="info" class="w-5 h-5"></i></button>
            <button @click="currentTab = 'shopping'" :class="tabClass('shopping')"><i data-lucide="shopping-basket" class="w-5 h-5"></i></button>
            <button @click="currentTab = 'expense'" :class="tabClass('expense')"><i data-lucide="circle-dollar-sign" class="w-5 h-5"></i></button>
        </div>
    </header>

    <div class="content-up p-5">
        
        <div v-if="currentTab === 'schedule'">
            <div class="flex items-center justify-between bg-white/60 p-4 rounded-3xl mb-6 border border-white">
                <div class="flex items-center gap-3">
                    <i data-lucide="cloud-sun" class="text-teal-500 w-10 h-10"></i>
                    <div>
                        <div class="text-2xl font-black text-teal-800">19¬∞C</div>
                        <div class="text-[10px] text-gray-500 font-bold uppercase tracking-wider">Feels like 17¬∞C ¬∑ OKINAWA</div>
                    </div>
                </div>
                <div class="text-right"><span class="bg-teal-100 text-teal-700 text-[10px] px-2 py-1 rounded-full font-bold">SUNNY</span></div>
            </div>

            <div class="flex overflow-x-auto gap-3 pb-6 no-scrollbar">
                <div v-for="date in dates" :key="date.full" 
                     @click="selectedDate = date.full"
                     :class="['date-item flex-shrink-0 w-16 h-20 rounded-2xl flex flex-col items-center justify-center transition-all bg-white shadow-sm border border-gray-100', selectedDate === date.full ? 'active' : '']">
                    <span class="text-[10px] font-black opacity-60">{{ date.weekday }}</span>
                    <span class="text-2xl font-black">{{ date.day }}</span>
                </div>
            </div>

            <draggable v-model="currentDayItems" item-key="id" handle=".drag-handle" @end="updateIcons">
                <template #item="{element, index}">
                    <div>
                        <div v-if="index > 0" class="flex items-center gap-4 py-3 ml-12">
                            <div class="flex flex-col items-center gap-1">
                                <i :data-lucide="element.transType === 'walk' ? 'walking' : 'car'" class="w-4 h-4 text-teal-300"></i>
                                <span class="text-[10px] font-bold text-teal-400">{{ element.travelTime || '15m' }}</span>
                            </div>
                            <div class="h-[1px] flex-1 bg-dashed bg-teal-100"></div>
                        </div>

                        <div v-if="element.type === 'Ëà™Áè≠'" class="flight-card shadow-xl mb-4">
                            <div class="flex justify-between items-center mb-4">
                                <span class="text-xs font-bold tracking-widest opacity-80 uppercase">{{ element.title }}</span>
                                <i data-lucide="plane" class="w-4 h-4"></i>
                            </div>
                            <div class="flex justify-between items-center">
                                <div class="text-center">
                                    <div class="text-3xl font-black">{{ element.from }}</div>
                                    <div class="text-sm opacity-80">{{ element.time.split('-')[0] }}</div>
                                </div>
                                <div class="flex-1 flex flex-col items-center px-4 opacity-50">
                                    <div class="w-full h-[2px] bg-white relative">
                                        <div class="absolute -top-1 right-0"><i data-lucide="chevron-right" class="w-3 h-3"></i></div>
                                    </div>
                                </div>
                                <div class="text-center">
                                    <div class="text-3xl font-black">{{ element.to }}</div>
                                    <div class="text-sm opacity-80">{{ element.time.split('-')[1] }}</div>
                                </div>
                            </div>
                        </div>

                        <div v-else class="bg-white rounded-[30px] p-5 shadow-sm mb-2 relative flex gap-4 border border-white">
                            <div class="drag-handle cursor-grab active:cursor-grabbing opacity-20 hover:opacity-100 flex items-center">
                                <i data-lucide="grip-vertical" class="w-5 h-5"></i>
                            </div>
                            <div class="flex-1">
                                <div class="flex justify-between">
                                    <span class="text-[10px] font-black text-teal-600 bg-teal-50 px-2 py-0.5 rounded-lg uppercase tracking-tighter">{{ element.type }}</span>
                                    <span class="text-[10px] font-bold text-gray-300">{{ element.time }}</span>
                                </div>
                                <h3 class="font-black text-gray-800 text-lg mt-1">{{ element.title }}</h3>
                                <p v-if="element.price" class="text-red-400 text-xs font-bold mt-1">ÈñÄÁ•®: {{ element.price }}</p>
                                <p v-if="element.note" class="text-gray-400 text-[11px] mt-2 italic line-clamp-2">"{{ element.note }}"</p>
                                
                                <div class="flex gap-2 mt-4">
                                    <button @click="go(element.location)" class="flex-1 bg-teal-500 text-white py-2.5 rounded-2xl text-xs font-bold flex items-center justify-center gap-2">
                                        <i data-lucide="navigation" class="w-4 h-4"></i> Â∞éËà™
                                    </button>
                                    <button @click="editItem(element)" class="bg-gray-50 text-gray-400 px-4 rounded-2xl"><i data-lucide="edit-3" class="w-4 h-4"></i></button>
                                </div>
                            </div>
                        </div>
                    </div>
                </template>
            </draggable>
        </div>

        <div v-if="currentTab === 'info'" class="space-y-4">
            <div class="bg-white p-6 rounded-[35px] shadow-sm">
                <h3 class="font-black text-gray-800 mb-4 flex items-center gap-2"><i data-lucide="refresh-ccw" class="text-teal-500"></i> ÂåØÁéáË®àÁÆóÊ©ü</h3>
                <div class="grid grid-cols-1 gap-4">
                    <input v-model="exchange.jpy" type="number" class="w-full bg-gray-50 p-4 rounded-2xl text-xl font-black outline-teal-500" placeholder="Ëº∏ÂÖ• JPY">
                    <div class="bg-teal-600 text-white p-4 rounded-2xl flex justify-between items-center">
                        <span class="font-bold">Âè∞Âπ£‰º∞Ë®à</span>
                        <span class="text-2xl font-black">NT$ {{ (exchange.jpy * 0.21).toFixed(0) }}</span>
                    </div>
                </div>
            </div>
            <div class="bg-white p-5 rounded-[30px] shadow-sm">
                <h3 class="font-black mb-3 text-teal-600">üè® ‰ΩèÂÆøË≥áË®ä</h3>
                <div class="space-y-4 text-sm">
                    <div v-for="hotel in hotels" class="border-b border-gray-50 pb-3 last:border-0">
                        <div class="font-bold">{{ hotel.date }}</div>
                        <div class="text-gray-800 font-black">{{ hotel.name }}</div>
                        <button @click="go(hotel.name)" class="text-teal-500 text-xs mt-1 underline">ÈªûÊàëÂ∞éËà™</button>
                    </div>
                </div>
            </div>
        </div>

        <div v-if="currentTab === 'shopping'" class="pb-20">
            <div class="grid grid-cols-2 gap-4">
                <div v-for="(item, idx) in shoppingList" :key="idx" class="bg-white rounded-3xl overflow-hidden shadow-sm border border-white">
                    <div class="h-40 bg-gray-100 relative group">
                        <img v-if="item.img" :src="item.img" class="w-full h-full object-cover">
                        <div v-else class="w-full h-full flex flex-col items-center justify-center text-gray-300">
                            <i data-lucide="camera" class="w-8 h-8 mb-1"></i>
                            <span class="text-[10px] font-bold">ÈªûÊìä‰∏äÂÇ≥ÁÖßÁâá</span>
                            <input type="file" @change="handleFileUpload($event, idx)" class="absolute inset-0 opacity-0 cursor-pointer" accept="image/*">
                        </div>
                    </div>
                    <div class="p-4">
                        <input v-model="item.name" class="w-full font-black text-sm border-none bg-transparent focus:ring-0 p-0" placeholder="ÂìÅÂêç...">
                    </div>
                </div>
                <div @click="addShoppingItem" class="border-2 border-dashed border-gray-200 rounded-3xl h-56 flex items-center justify-center text-gray-300">
                    <i data-lucide="plus-circle" class="w-10 h-10"></i>
                </div>
            </div>
        </div>

        <div v-if="currentTab === 'expense'">
            <div class="bg-teal-700 text-white p-8 rounded-[40px] mb-6 shadow-xl">
                <div class="text-[10px] font-black opacity-60 uppercase tracking-widest">Total Spent (JPY)</div>
                <div class="text-4xl font-black mt-1">¬• {{ totalExpenses.toLocaleString() }}</div>
                <div class="text-xs mt-3 bg-white/20 inline-block px-3 py-1 rounded-full">‚âà NT$ {{ (totalExpenses * 0.21).toLocaleString() }}</div>
            </div>
            
            <div class="space-y-3">
                <div v-for="ex in expenses" class="bg-white p-5 rounded-[25px] flex justify-between items-center shadow-sm">
                    <div class="flex items-center gap-4">
                        <div class="w-10 h-10 bg-teal-50 text-teal-600 rounded-full flex items-center justify-center font-black text-xs">{{ ex.cat[0] }}</div>
                        <div>
                            <div class="font-black text-gray-800 text-sm">{{ ex.name }}</div>
                            <div class="text-[10px] text-gray-400 font-bold">{{ ex.date }} ¬∑ {{ ex.pay }}</div>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="font-black text-teal-600">¬• {{ ex.amount }}</div>
                    </div>
                </div>
            </div>
            <button @click="addExpense" class="fixed bottom-10 right-8 w-14 h-14 bg-teal-600 text-white rounded-full shadow-2xl flex items-center justify-center animate-bounce z-50">
                <i data-lucide="plus" class="w-8 h-8"></i>
            </button>
        </div>
    </div>

    <div class="fixed bottom-0 left-0 right-0 max-w-md mx-auto p-4 pointer-events-none text-center">
        <span class="bg-black/50 text-white text-[10px] px-4 py-1.5 rounded-full backdrop-blur-md opacity-50">Long press to drag & reorder items</span>
    </div>
</div>

<script>
const { createApp, ref, computed, onMounted, nextTick } = Vue;

createApp({
    components: { draggable: window.vuedraggable },
    setup() {
        const bannerUrl = ref('Gemini_Generated_Image_rgp6cfrgp6cfrgp6.png');
        const currentTab = ref('schedule');
        const selectedDate = ref('2025-12-27');
        const exchange = ref({ jpy: 0 });

        const dates = [
            { full: '2025-12-27', weekday: 'SAT', day: '27' },
            { full: '2025-12-28', weekday: 'SUN', day: '28' },
            { full: '2025-12-29', weekday: 'MON', day: '29' },
            { full: '2025-12-30', weekday: 'TUE', day: '30' },
            { full: '2025-12-31', weekday: 'WED', day: '31' }
        ];

        // ÂÆåÊï¥Â°´ÂÖ•ÊâÄÊúâË°åÁ®ãË≥áÊñô
        const scheduleItems = ref([
            // 12/27
            { id: 101, date: '2025-12-27', type: 'Ëà™Áè≠', title: 'Ë∂äÊç∑ VZ568', from:'TPE', to:'OKA', time: '14:45-17:10', location: 'Naha Airport', transType: 'none' },
            { id: 102, date: '2025-12-27', type: 'ÁßüËªä', title: 'COTÁßüËªä ÂèñËªä', time: '18:00', location: 'COT RENTACAR', transType: 'car', travelTime: '15m' },
            { id: 103, date: '2025-12-27', type: 'ÊôØÈªû', title: 'ÁæéÂúãÊùëÁúãÁÖôÁÅ´', time: '20:00', location: 'American Village', transType: 'car', travelTime: '35m', note: '20:00 ÈñãÂßã' },
            { id: 104, date: '2025-12-27', type: '‰ΩèÂÆø', title: 'Mr. Kinjo in Alaha Style', time: '21:30', location: 'Mr. Kinjo in Alaha Style', transType: 'car', travelTime: '10m' },
            
            // 12/28
            { id: 201, date: '2025-12-28', type: 'ÁæéÈ£ü', title: 'ÁèÄÂ°îÁë™ ÂåóË∞∑ÁæéÂúãÊùëÂ∫ó', time: '08:00', location: 'Pork Tamago Onigiri Chatan', transType: 'car', travelTime: '10m' },
            { id: 202, date: '2025-12-28', type: 'ÊôØÈªû', title: 'ÁúüÊ†ÑÁî∞Â≤¨ÈßêËªäÂ†¥', time: '12:00', location: 'Maeda Cape', transType: 'car', travelTime: '30m' },
            { id: 203, date: '2025-12-28', type: 'Ë≥ºÁâ©', title: 'AEON MALL Okinawa Rycom', time: '15:30', location: 'AEON MALL Okinawa Rycom', transType: 'car', travelTime: '25m' },
            { id: 204, date: '2025-12-28', type: 'ÁæéÈ£ü', title: 'ÁáíËÇâ ÁêâÁêÉ„ÅÆÁâõ ÊÅ©Á¥çÂ∫ó', time: '18:45', location: 'Ryukyu no Ushi Enna', transType: 'car', travelTime: '30m', note: 'Ê•µËá¥ÂíåÁâõÈ´îÈ©ó' },
            { id: 205, date: '2025-12-28', type: '‰ΩèÂÆø', title: 'Green Rich Hotel ÂêçË≠∑', time: '21:00', location: 'Green Rich Hotel Nago', transType: 'car' },

            // 12/29
            { id: 301, date: '2025-12-29', type: 'ÊôØÈªû', title: 'ÁæéÈ∫óÊµ∑Ê∞¥ÊóèÈ§®', time: '08:30', location: 'Churaumi Aquarium', transType: 'car', travelTime: '30m', price: '¬•2,180' },
            { id: 302, date: '2025-12-29', type: 'ÊôØÈªû', title: 'ÂÇôÁÄ¨„ÅÆ„Éï„ÇØ„ÇÆ‰∏¶Êú®', time: '10:30', location: 'Bise Fukugi Tree Road', transType: 'car', travelTime: '5m' },
            { id: 303, date: '2025-12-29', type: 'ÁæéÈ£ü', title: 'ÊºÅÂ∏´È£üÂ†Ç Â§ß„Å∞„Çì„Å∂„ÇãËàû', time: '11:00', location: 'Fisherman Dining Oobamburumai', transType: 'car' },
            { id: 304, date: '2025-12-29', type: 'ÊôØÈªû', title: 'Âè§ÂÆáÂà©Â≥∂', time: '13:30', location: 'Kouri Island', transType: 'car' },
            { id: 305, date: '2025-12-29', type: 'ÁæéÈ£ü', title: 'Â§ßÂÆ∂ÈòøÂè§Ë±¨', time: '19:30', location: 'Ufuya', transType: 'car' },

            // 12/30
            { id: 401, date: '2025-12-30', type: 'ÊôØÈªû', title: 'ÈÉ®ÁÄ®ÂêçÊµ∑‰∏≠ÂÖ¨Âúí', time: '09:00', location: 'Busena Marine Park', transType: 'car' },
            { id: 402, date: '2025-12-30', type: 'ÊôØÈªû', title: 'ÁéâÊ≥âÊ¥û', time: '11:30', location: 'Gyokusendo Cave', transType: 'car' },
            { id: 403, date: '2025-12-30', type: 'ÊôØÈªû', title: 'ÁÄ®Èï∑Â≥∂', time: '15:00', location: 'Umikaji Terrace', transType: 'car' },
            { id: 404, date: '2025-12-30', type: 'ÁßüËªä', title: 'ÈÇÑËªä', time: '18:00', location: 'COT RENTACAR', transType: 'car' },
            { id: 405, date: '2025-12-30', type: 'ÁæéÈ£ü', title: 'ÂÇëÂÖãÁâõÊéíÈ§®', time: '19:30', location: 'Jack Steak House', transType: 'walk' },

            // 12/31
            { id: 501, date: '2025-12-31', type: 'ÊôØÈªû', title: 'Ê≥¢‰∏äÂÆÆ', time: '09:00', location: 'Naminoue Shrine', transType: 'walk' },
            { id: 502, date: '2025-12-31', type: 'Ë≥ºÁâ©', title: 'ÂúãÈöõÈÄö / ÁâßÂøóÂ∏ÇÂ†¥', time: '11:00', location: 'Kokusai Dori', transType: 'walk' },
            { id: 503, date: '2025-12-31', type: 'Ëà™Áè≠', title: 'Ë∂äÊç∑ VZ569', from:'OKA', to:'TPE', time: '18:10-18:50', location: 'Naha Airport', transType: 'none' },
        ]);

        const hotels = [
            { date: '12/27', name: 'Mr. Kinjo in Alaha Style' },
            { date: '12/28-29', name: '„Ç∞„É™„Éº„É≥„É™„ÉÉ„ÉÅ„Éõ„ÉÜ„É´Ê≤ñÁ∏ÑÂêçË≠∑' },
            { date: '12/30', name: 'Mr.KINJO Miki24 in ÁâßÂøóÈßÖÂâç' }
        ];

        const shoppingList = ref([
            { name: 'Á¥ÖËäãÂ°î', img: null },
            { name: 'Èõ™ÈπΩ', img: null }
        ]);

        const expenses = ref([
            { cat: 'ÁæéÈ£ü', name: 'ÁêâÁêÉ‰πãÁâõ', amount: 15000, date: '2025-12-28', pay: '‰ø°Áî®Âç°' },
            { cat: '‰∫§ÈÄö', name: 'ÁßüËªäË≤ªÁî®', amount: 28000, date: '2025-12-27', pay: 'ÁèæÈáë' }
        ]);

        const currentDayItems = computed({
            get: () => scheduleItems.value.filter(i => i.date === selectedDate.value),
            set: (val) => {
                const otherDays = scheduleItems.value.filter(i => i.date !== selectedDate.value);
                scheduleItems.value = [...otherDays, ...val];
                nextTick(() => lucide.createIcons());
            }
        });

        const handleFileUpload = (event, index) => {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (e) => { shoppingList.value[index].img = e.target.result; };
                reader.readAsDataURL(file);
            }
        };

        const addShoppingItem = () => shoppingList.value.push({ name: '', img: null });
        const totalExpenses = computed(() => expenses.value.reduce((sum, i) => sum + i.amount, 0));
        const go = (loc) => window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(loc)}`, '_blank');
        const tabClass = (tab) => `p-3 rounded-full transition-all ${currentTab.value === tab ? 'bg-white text-teal-600' : 'text-white opacity-40'}`;

        onMounted(() => lucide.createIcons());

        return {
            bannerUrl, currentTab, selectedDate, dates, scheduleItems, currentDayItems, hotels,
            shoppingList, expenses, totalExpenses, exchange, handleFileUpload, addShoppingItem, go, tabClass
        };
    }
}).mount('#app');
</script>
</body>
</html>
